<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Glade FAQ</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.52"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Glade FAQ</A
></H1
><P
CLASS="COPYRIGHT"
><A
HREF="ln7.html"
>Copyright</A
> &copy; 2000 by <SPAN
CLASS="HOLDER"
>Damon Chaplin</SPAN
></P
><HR
WIDTH="75%"
ALIGN="CENTER"
COLOR="#000000"
SIZE="1"></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="index.html#QANDA"
>Glade FAQ</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="QANDA"
>Glade FAQ</A
></H1
><P
>  This is a list of the most frequently asked questions for the
  <TT
CLASS="APPLICATION"
>Glade</TT
> GTK+/GNOME user interface builder. 
 </P
><DIV
CLASS="QANDASET"
><DL
><DT
>1. <A
HREF="index.html#AEN19"
>General Information About Glade</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="index.html#AEN22"
>     What documentation is there for Glade?
     </A
></DT
><DT
>1.2. <A
HREF="index.html#AEN35"
>     Is there any example code?
     </A
></DT
><DT
>1.3. <A
HREF="index.html#AEN43"
>     Do I have to use a particular license for the C code generated by Glade?
     </A
></DT
></DL
></DD
><DT
>2. <A
HREF="index.html#AEN48"
>Creating A User Interface In Glade</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="index.html#AEN51"
>      When I add a widget to a window, it fills the whole window and I
      can't add any other widgets.
     </A
></DT
><DT
>2.2. <A
HREF="index.html#AEN59"
>     How do I change the colors of a widget, e.g. make a label red?
     </A
></DT
><DT
>2.3. <A
HREF="index.html#AEN67"
>      How do I add a pixmap to a button?
     </A
></DT
><DT
>2.4. <A
HREF="index.html#AEN74"
>      How do I add several widgets of the same type in one go?
     </A
></DT
><DT
>2.5. <A
HREF="index.html#AEN81"
>      I get this warning whenever I use a scrolled window:
      Gtk-WARNING **: <SPAN
CLASS="ERRORNAME"
>gtk_scrolled_window_add(): cannot add
      non scrollable widget use
      gtk_scrolled_window_add_with_viewport() instead</SPAN
>
     </A
></DT
><DT
>2.6. <A
HREF="index.html#AEN88"
>     What graphics formats does Glade support?
     </A
></DT
><DT
>2.7. <A
HREF="index.html#AEN95"
>     How do I add a signal handler?
     </A
></DT
></DL
></DD
><DT
>3. <A
HREF="index.html#AEN113"
>Building The C Code Generated By Glade</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="index.html#AEN116"
>      How do I build the code generated by Glade?
     </A
></DT
><DT
>3.2. <A
HREF="index.html#AEN137"
>      I get this error:
      aclocal: configure.in: 10: <SPAN
CLASS="ERRORNAME"
>macro `AM_PATH_GTK' not
      found in library</SPAN
>
     </A
></DT
><DT
>3.3. <A
HREF="index.html#AEN159"
>	I get this error:
	** CRITICAL **: file glade_gnome.c: line 939
	    (glade_gnome_write_menu_item_source):
		assertion `source_buffer != NULL' failed.
     </A
></DT
></DL
></DD
><DT
>4. <A
HREF="index.html#AEN163"
>Using The C Code Generated By Glade</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="index.html#AEN166"
>      What are all the files output by Glade?
     </A
></DT
><DT
>4.2. <A
HREF="index.html#AEN267"
>      What files can the developer edit safely and which files are
      overwritten? 
     </A
></DT
><DT
>4.3. <A
HREF="index.html#AEN285"
>      How do I add my own source files to the project?
     </A
></DT
><DT
>4.4. <A
HREF="index.html#AEN297"
>     How do I add a library to the project?
     </A
></DT
><DT
>4.5. <A
HREF="index.html#AEN307"
>      How do I get a pointer to a widget from within a signal handler?
     </A
></DT
><DT
>4.6. <A
HREF="index.html#AEN319"
>     How do I get a pointer to a widget in another window?
     </A
></DT
><DT
>4.7. <A
HREF="index.html#AEN329"
>      How do I get the value of a GtkOptionMenu?
     </A
></DT
><DT
>4.8. <A
HREF="index.html#AEN337"
>      How do I get a GtkOptionMenu to call a function when it changes?
     </A
></DT
><DT
>4.9. <A
HREF="index.html#AEN349"
>      How do I connect to GtkAdjustment signals?
     </A
></DT
><DT
>4.10. <A
HREF="index.html#AEN359"
>     How do I add rows to a GtkCList before the window is shown?
     </A
></DT
></DL
></DD
></DL
><DIV
CLASS="QANDADIV"
><H3
><A
NAME="AEN19"
></A
>1. General Information About Glade</H3
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN22"
></A
><B
>1.1. </B
>     What documentation is there for Glade?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>     In the GNOME version of Glade the Quick-Start Guide, Manual, and FAQ are
available from the Help menu. Unfortunately these do not cover all aspects of
using Glade yet.
     </P
><P
>There are a few other docs available on the web:
     </P
><P
>Spanish Guide -
 <A
HREF="http://tigre.aragon.unam.mx/m3d/links_es.htm"
TARGET="_top"
>tigre.aragon.unam.mx/m3d/links_es.htm</A
>
     </P
><P
>Italian Guide - 
 <A
HREF="http://digilander.iol.it/robang/glade"
TARGET="_top"
>digilander.iol.it/robang/glade</A
>
     </P
><P
>I don't think there are any books specifically about Glade, though I have
seen a chapter on Glade in a book from Wrox press for Linux developers.
     </P
><P
>I'll add links to documentation to Glade's home page at
<A
HREF="http://glade.pn.org"
TARGET="_top"
>glade.pn.org</A
>
as they become available.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN35"
></A
><B
>1.2. </B
>     Is there any example code?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>Glade includes a simple text editor example application in the examples/editor
directory. If you have a binary-only package of Glade (e.g. an RPM), these
files may possibly be installed in /usr/doc/glade-X.X.X. If you can't find
it, download the Glade tarball from
<A
HREF="http://glade.pn.org"
TARGET="_top"
>glade.pn.org</A
>.
     </P
><P
>The web site contains links to quite a few applications created using Glade.
These may contain useful example code. See the 'Applications' page on
<A
HREF="http://glade.pn.org"
TARGET="_top"
>glade.pn.org</A
>.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN43"
></A
><B
>1.3. </B
>     Do I have to use a particular license for the C code generated by Glade?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>No. You are free to use whatever license you like for the C code generated
by Glade.
     </P
><P
>Though in the spirit of free software we do encourage you to use the GPL or
LGPL licenses.
     </P
></DIV
></DIV
></DIV
><DIV
CLASS="QANDADIV"
><H3
><A
NAME="AEN48"
></A
>2. Creating A User Interface In Glade</H3
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN51"
></A
><B
>2.1. </B
>      When I add a widget to a window, it fills the whole window and I
      can't add any other widgets.
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      This is not a bug in <TT
CLASS="APPLICATION"
>Glade</TT
>! In GTK+
      you use containers to lay out your widgets. The commonly-used
      containers are at the bottom of the main page on the
      palette. Try adding a vertical box to a window in
      <TT
CLASS="APPLICATION"
>Glade</TT
>. Now add a table to one of the
      positions in the vertical box.  Do you get the idea now?
     </P
><P
>      If you really want to position widgets at specific coordinates,
      try the Fixed container. However, this isn't recommended since
      your  windows/dialogs will not look good when resized, and if
      you translate the text in the labels and buttons into other
      languages they may not fit.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN59"
></A
><B
>2.2. </B
>     How do I change the colors of a widget, e.g. make a label red?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>You can use standard GTK+ rc files to set the colors &#38; fonts of your widgets.
If you turn on the 'Set Widget Names' project option in Glade, that may make
it easier to refer to your widgets, as you can refer to them by name.
See the GTK+ Resource Files documentation at <A
HREF="http://developer.gnome.org/doc/API/gtk/index.html"
TARGET="_top"
>developer.gnome.org/doc/API/gtk/index.html</A
>. 
     </P
><P
>You can also change a widget's style within your code by calling
gtk_widget_modify_style(), e.g.
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  GdkColor red = { 0, 65535, 0, 0 };
  GtkRcStyle *rc_style = gtk_rc_style_new ();
  rc_style-&#62;fg[GTK_STATE_NORMAL] = red;
  rc_style-&#62;color_flags[GTK_STATE_NORMAL] |= GTK_RC_FG;
  gtk_widget_modify_style (widget, rc_style);
  gtk_rc_style_unref (rc_style);
      </PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN67"
></A
><B
>2.3. </B
>      How do I add a pixmap to a button?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      Create a button and select <TT
CLASS="GUILABEL"
><B
>Remove Label</B
></TT
>
      from the popup menu. You can then add any widgets you like to
      the button, e.g. a horizontal box with a pixmap and a label
      inside it. (<TT
CLASS="APPLICATION"
>Glade</TT
> may make this even
      easier in future.)
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN74"
></A
><B
>2.4. </B
>      How do I add several widgets of the same type in one go?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      Hold the 'Control' key when you select the widget in the
      <SPAN
CLASS="INTERFACE"
>Palette</SPAN
>. It will then stay selected until
      you select another widget or the
      <SPAN
CLASS="INTERFACE"
>Selector</SPAN
>. 
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN81"
></A
><B
>2.5. </B
>      I get this warning whenever I use a scrolled window:
      Gtk-WARNING **: <SPAN
CLASS="ERRORNAME"
>gtk_scrolled_window_add(): cannot add
      non scrollable widget use
      gtk_scrolled_window_add_with_viewport() instead</SPAN
>
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      You can safely ignore this warning. It is output by GTK+ to
      remind people to update their code, since the behaviour of
      scrolled windows changed quite a bit between GTK+ 1.0 and GTK+
      1.2. But the <TT
CLASS="APPLICATION"
>Glade</TT
> code is OK. The
      warning should not appear in your final application.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN88"
></A
><B
>2.6. </B
>     What graphics formats does Glade support?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>If you are creating a GTK+ application, your graphics must be in XPM format.
(GTK+ 2.0 will include the gdk-pixbuf library and so will support many more
graphics formats.)
     </P
><P
>If you are creating a GNOME application, most graphics formats can be used.
Though the PNG format is preferred for most graphics such as icons.
     </P
><P
>You can convert images between formats using the GIMP graphics
application or the 'convert' utility in the ImageMagick toolkit.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN95"
></A
><B
>2.7. </B
>     How do I add a signal handler?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>Follow these steps:
     <P
></P
><UL
><LI
><P
>Select the widget you want to add the handler to.
       </P
></LI
><LI
><P
>Select the 'Signals' page in the Property Editor window.
       </P
></LI
><LI
><P
>Click the '...' button to the right of the 'Signal:' field. This should
 show a popup window listing the signals that this widget emits.
       </P
></LI
><LI
><P
>In the popup window, select which signal you want to connect a handler for
 and hit the 'OK' button.
       </P
></LI
><LI
><P
>Glade automatically creates a name for the signal handler function in the
 'Handler:' field, but you are free to change this if you desire.
       </P
></LI
><LI
><P
>Click the 'Add' button to add it to the list of signal handlers for this
 widget.
     </P
></LI
></UL
>
    </P
><P
>When you generate the C source code, an empty signal handler function should
be output in the callbacks.c file. You can add your code to this function.
     </P
></DIV
></DIV
></DIV
><DIV
CLASS="QANDADIV"
><H3
><A
NAME="AEN113"
></A
>3. Building The C Code Generated By Glade</H3
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN116"
></A
><B
>3.1. </B
>      How do I build the code generated by Glade?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      You need <TT
CLASS="APPLICATION"
>automake</TT
> &#62;= 1.4 &#38;
      <TT
CLASS="APPLICATION"
>autoconf</TT
> &#62;= 2.13 to build the generated
      C code. You also need <TT
CLASS="APPLICATION"
>gettext</TT
> &#62;=
      0.10.35 if you enabled <TT
CLASS="APPLICATION"
>gettext</TT
>
      support. See the <I
CLASS="CITETITLE"
>Requirements</I
> section in
      the <TT
CLASS="FILENAME"
>README</TT
> file for links to these.
     </P
><P
>      Run <B
CLASS="COMMAND"
>./autogen.sh</B
> in the toplevel directory of
      the project to run <TT
CLASS="APPLICATION"
>automake</TT
>,
      <TT
CLASS="APPLICATION"
>autoconf</TT
> and the related utilities to
      build the <TT
CLASS="FILENAME"
>Makefile</TT
>'s. Pass it any options
      you want passed to configure, e.g. <B
CLASS="COMMAND"
>./autogen.sh
      --prefix /usr/local/gnome</B
>.
     </P
><P
>      Then run <B
CLASS="COMMAND"
>make</B
> to build your application.
     </P
><P
>      Note that for GNOME applications, you must also do a
      <B
CLASS="COMMAND"
>make install</B
>  so that the pixmaps are
      installed properly. If you don't do that, it will still run, but
      you won't see the pixmaps.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN137"
></A
><B
>3.2. </B
>      I get this error:
      aclocal: configure.in: 10: <SPAN
CLASS="ERRORNAME"
>macro `AM_PATH_GTK' not
      found in library</SPAN
>
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      This means that the <TT
CLASS="FILENAME"
>gtk.m4</TT
> file cannot be
      found. (<TT
CLASS="FILENAME"
>gtk.m4</TT
> is a set of m4 macros which
      is installed as part of GTK+ and is used to build programs
      which use GTK+.) <TT
CLASS="APPLICATION"
>aclocal</TT
> (part of
      <TT
CLASS="APPLICATION"
>automake</TT
>) searches for these macros
      to add to <TT
CLASS="FILENAME"
>aclocal.m4</TT
> in your program's root
      directory.
     </P
><P
>      To find out where GTK+ is installed, run <B
CLASS="COMMAND"
>gtk-config
      --prefix</B
>.  The <TT
CLASS="FILENAME"
>gtk.m4</TT
> file should
      be in the <TT
CLASS="FILENAME"
>share/aclocal</TT
>
      subdirectory. To find out the directory that
      <TT
CLASS="APPLICATION"
>aclocal</TT
> is using, run
      <B
CLASS="COMMAND"
>aclocal --print-ac-dir</B
>. 
     </P
><P
>      You should add the directory that the GTK+ m4 file is installed
      to the <TT
CLASS="VARNAME"
>ACLOCAL_FLAGS</TT
> environment variable,
      e.g. if the GTK+ m4 files are in <TT
CLASS="FILENAME"
>/usr/local/share/aclocal</TT
>, then add
      this to your <TT
CLASS="FILENAME"
>$HOME/.profile</TT
>:
      <B
CLASS="COMMAND"
>export ACLOCAL_FLAGS="-I
      /usr/local/share/aclocal/"</B
>.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN159"
></A
><B
>3.3. </B
>	I get this error:
	** CRITICAL **: file glade_gnome.c: line 939
	    (glade_gnome_write_menu_item_source):
		assertion `source_buffer != NULL' failed.
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>	You are trying to use Gnome stock menu items in a GTK+-only app.
    Edit any menus you have and make sure the "Stock" property is set to
    "None" for every item.
     </P
></DIV
></DIV
></DIV
><DIV
CLASS="QANDADIV"
><H3
><A
NAME="AEN163"
></A
>4. Using The C Code Generated By Glade</H3
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN166"
></A
><B
>4.1. </B
>      What are all the files output by Glade?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      These are the default output files, but some of your file names
      may differ if you have changed the project options.
     </P
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>autogen.sh</TT
>
      . </B
></B
>       A script which runs <TT
CLASS="APPLICATION"
>automake</TT
>,
       <TT
CLASS="APPLICATION"
>autoconf</TT
> and the related programs in
       the correct order, making it very easy to build the
       application. You pass it any arguments you want to be  passed
       to <TT
CLASS="APPLICATION"
>configure</TT
>. After running it, you
       can type <B
CLASS="COMMAND"
>make</B
> to build the application.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>configure.in</TT
>
      . </B
></B
>       Standard script passed to <TT
CLASS="APPLICATION"
>autoconf</TT
>
       to generate the configure script.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>Makefile.am</TT
>
      . </B
></B
>       Standard make rules passed to automake to generate the
       <TT
CLASS="FILENAME"
>Makefile.in</TT
>, which the configure script
       turns into <TT
CLASS="FILENAME"
>Makefile</TT
>. 
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>acconfig.h</TT
>
      . </B
></B
>       Contains a few macros which are set during the configure script
       and added to the <TT
CLASS="FILENAME"
>config.h</TT
> header (which
       should be the first file #include'd by all of your source
       files).  Most of these macros are needed for gettext support
       (ENABLE_NLS, HAVE_CATGETS, HAVE_GETTEXT, HAVE_LC_MESSAGES,
       HAVE_STPCPY), HAVE_LIBSM is needed for Gnome (but it doesn't
       hurt a GTK+ app), and a few are added by
       <TT
CLASS="APPLICATION"
>Glade</TT
>(PACKAGE_LOCALE_DIR,
       PACKAGE_DATA_DIR, PACKAGE_SOURCE_DIR).
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>stamp-h.in</TT
>
      . </B
></B
>       Used as a timestamp by <TT
CLASS="APPLICATION"
>automake</TT
>, for
       rebuilding some generated files.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>AUTHORS</TT
>, <TT
CLASS="FILENAME"
>ChangeLog</TT
>,
       <TT
CLASS="FILENAME"
>NEWS</TT
>, <TT
CLASS="FILENAME"
>README</TT
>
      . </B
></B
>       These files are all initially empty, but are created to comply
       with the GNU conventions. 
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/Makefile.am</TT
>
      . </B
></B
>       Standard automake file.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/main.c</TT
>
      . </B
></B
>       Contains the <TT
CLASS="FUNCTION"
>main</TT
>() function which will
       create one of each  window/dialog for you.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/interface.h</TT
>
      . </B
></B
>       Declarations of functions you can call to create the windows
       and dialogs which were built in
       <TT
CLASS="APPLICATION"
>Glade</TT
>.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/interface.c</TT
>
      . </B
></B
>       The code to create the windows and dialogs and all the widgets.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/callbacks.h</TT
>
      . </B
></B
>       Declarations of the signal handler and callback functions which
       you will write.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/callbacks.c</TT
>
      . </B
></B
>       Tthe signal handler and callback functions.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/support.h</TT
>
      . </B
></B
>       Declarations of some support functions, including
       <TT
CLASS="FUNCTION"
>lookup_widget</TT
>() which you can use to get
       pointers to widgets.
      </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
><B
>       <TT
CLASS="FILENAME"
>src/support.c</TT
>
      . </B
></B
>       The support functions.
      </P
></DIV
><P
>      If <TT
CLASS="APPLICATION"
>gettext</TT
> support is enable, the
      <TT
CLASS="FILENAME"
>po</TT
> directory is created,
      with <TT
CLASS="FILENAME"
>POTFILES.in</TT
> and a separate
      <TT
CLASS="FILENAME"
>ChangeLog</TT
>. <TT
CLASS="FILENAME"
>POTFILES.in</TT
>
      lists the source files which contain translatable strings, and
      you should add any source files you create here.
     </P
><P
>      For GNOME projects the <TT
CLASS="FILENAME"
>macros</TT
> directory is also added,
      containing all the m4 macros used to build the project. (These
      should really have been installed as part of GNOME, but
      unfortunately this wasn't done in GNOME 1.0.X. Hopefully this
      will be fixed in a future version of GNOME, and so this
      directory will not be needed.)
     </P
><P
>      <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>Changing the GNOME and Gettext Support Options</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>        If you change the <TT
CLASS="GUILABEL"
><B
>Gnome Support</B
></TT
> or
        <TT
CLASS="GUILABEL"
><B
>Gettext Support</B
></TT
> project  options after
        building the project, you will need to update some of the
        build files such as <TT
CLASS="FILENAME"
>configure.in</TT
> and
        <TT
CLASS="FILENAME"
>Makefile.am</TT
>. The best solution may be to
        change the project directory in the <SPAN
CLASS="INTERFACE"
>Project
        Options</SPAN
> dialog, and to rebuild the project from
        scratch. However, you would have to copy over any code you
        have added to signal handlers. An alternative would be to
        delete <TT
CLASS="FILENAME"
>autogen.sh</TT
>,
        <TT
CLASS="FILENAME"
>configure.in</TT
>,
        <TT
CLASS="FILENAME"
>Makefile.am</TT
>,
        <TT
CLASS="FILENAME"
>src/Makefile.am</TT
>, and
        <TT
CLASS="FILENAME"
>src/main.c</TT
> and use
        <TT
CLASS="APPLICATION"
>Glade</TT
>  to recreate them. But if you
        have changed these files you will need to add the changes back
        in.  (Hopefully <TT
CLASS="APPLICATION"
>Glade</TT
> will deal
        with this better in future.)
       </P
></TD
></TR
></TABLE
></DIV
>
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN267"
></A
><B
>4.2. </B
>      What files can the developer edit safely and which files are
      overwritten? 
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      <TT
CLASS="APPLICATION"
>Glade</TT
> will not overwrite most of the
      files. It will recreate the build files if they don't exist (and
      the corresponding project option is set.)
     </P
><P
>      The files which <TT
CLASS="APPLICATION"
>Glade</TT
> overwrites are:
      <TT
CLASS="FILENAME"
>interface.h</TT
>,
      <TT
CLASS="FILENAME"
>interface.c</TT
>, 
      <TT
CLASS="FILENAME"
>support.h</TT
>, and
      <TT
CLASS="FILENAME"
>support.c</TT
>.
      (Though you may have named them differently in your project, if
      you changed them in the <SPAN
CLASS="INTERFACE"
>Project Options</SPAN
>
      dialog.)
     </P
><P
>      These files all have a warning at the top saying <SPAN
CLASS="QUOTE"
>"DO NOT
      EDIT"</SPAN
>.
     </P
><P
>      If you have added or updated any signal handlers, then these are
      appended to the <TT
CLASS="FILENAME"
>callbacks.h</TT
> and
      <TT
CLASS="FILENAME"
>callbacks.c</TT
> files. So any code you have
      already added for callbacks is completely safe! If you have
      renamed a handler function then it is up to you to remove the
      old version and copy any code to the new function.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN285"
></A
><B
>4.3. </B
>      How do I add my own source files to the project?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      Add the source file (and any header file) to
      <TT
CLASS="FILENAME"
>src/Makefile.am</TT
>, in the
      <TT
CLASS="VARNAME"
><TT
CLASS="REPLACEABLE"
><I
>project1</I
></TT
>_SOURCES</TT
>
      variable (where <TT
CLASS="REPLACEABLE"
><I
>project1</I
></TT
> is the name
      of your project).
     </P
><P
>      If you are using <TT
CLASS="APPLICATION"
>gettext</TT
>, you may
      also want to add the source file to
      <TT
CLASS="FILENAME"
>po/POTFILES.in</TT
> so that the strings can be
      translated. 
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN297"
></A
><B
>4.4. </B
>     How do I add a library to the project?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>You need to add a test for the library in your project's configure.in file,
making sure that the CPPFLAGS and LIBS are updated to account for the library.
(The CPPFLAGS variable should contain any -I flags to pass to the C
preprocessor, and the LIBS variable should contain the -l and -L options to
pass to the linker.)
     </P
><P
>autoconf provides macros such as AC_CHECK_HEADER and AC_CHECK_LIB which can
be used to check for general headers and libraries.
     </P
><P
>Many GTK+ and Gnome libraries provide a config script such as gtk-config
which will output the CPPFLAGS and LIBS flags needed.
     </P
><P
>For example, libxml provides an xml-config script which you can use like this:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  dnl Get libxml flags &#38; libs
  AC_PATH_PROG(xml_config, xml-config)
  if test "x$xml_config" = "x"; then
    AC_MSG_ERROR([*** xml-config not found.])
  fi

  XML_CFLAGS=`$xml_config --cflags 2&#62;/dev/null`
  XML_LIBS=`$xml_config --libs 2&#62;/dev/null`
  CPPFLAGS="$CPPFLAGS $XML_CFLAGS"
  LIBS="$LIBS $XML_LIBS"
      </PRE
></TD
></TR
></TABLE
>
     </P
><P
>Make sure you place your configure.in test before the call to AC_OUTPUT.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN307"
></A
><B
>4.5. </B
>      How do I get a pointer to a widget from within a signal handler?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      Use the <TT
CLASS="FUNCTION"
>lookup_widget</TT
>() function
      provided. (It can be found in <TT
CLASS="FILENAME"
>support.c</TT
>.)
     </P
><P
>      You pass it a pointer to any widget in a window, and the name of
      the widget that you want to get. Usually in signal handlers you
      can use the first argument to the signal handler as the first
      parameter to <TT
CLASS="FUNCTION"
>lookup_widget</TT
>(), e.g. 
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GtkWidget *entry1;

  entry1 = lookup_widget (GTK_WIDGET (button), "entry1");

  ...
}
      </PRE
></TD
></TR
></TABLE
>
     </P
><P
>      Note that this does not work if you are using libglade. The corresponding
      code for libglade would be:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>&#13;void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GladeXML* xml;
  GtkWidget* entry1;

  xml = glade_get_widget_tree (GTK_WIDGET (button1));
  entry1 = glade_xml_get_widget (xml, "entry1");

  ...
}
      </PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN319"
></A
><B
>4.6. </B
>     How do I get a pointer to a widget in another window?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>You need to keep track of pointers to all your toplevel windows.
For simple applications you can just use global variables to store these
pointers.
     </P
><P
>For more complicated applications you can use
<TT
CLASS="FUNCTION"
>gtk_object_set_data</TT
>() and the
related functions to store a pointer to one window inside another window.
For example, if you want to create a dialog which needs to access widgets in
the main window you can do this:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  dialog = create_dialog1 ();  /* Call the function generated by Glade. */
  gtk_object_set_data (GTK_OBJECT (dialog), "main_window", main_window);
      </PRE
></TD
></TR
></TABLE
>
Then when you need to access the main window from within the dialog code,
you can do this:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  main_window = gtk_object_get_data (GTK_OBJECT (dialog), "main_window");
      </PRE
></TD
></TR
></TABLE
>
     </P
><P
>You need to be careful to ensure that the pointer is always valid.
If the window being pointed to is destroyed, make sure you no longer use the
pointer to it or your application may crash.
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN329"
></A
><B
>4.7. </B
>      How do I get the value of a GtkOptionMenu?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      Call <TT
CLASS="FUNCTION"
>gtk_menu_get_active</TT
>() with the
      GtkOptionMenu's menu to get the currently selected menu
      item. You can use <TT
CLASS="FUNCTION"
>g_list_index</TT
>() to find
      its index in the menu:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GtkWidget *option_menu, *menu, *active_item;
  gint active_index;

  option_menu = lookup_widget (GTK_WIDGET (button), "optionmenu1");
  menu = GTK_OPTION_MENU (option_menu)-&#62;menu;
  active_item = gtk_menu_get_active (GTK_MENU (menu));
  active_index = g_list_index (GTK_MENU_SHELL (menu)-&#62;children, active_item);

  g_print ("Active index: %i\n", active_index);
}</PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN337"
></A
><B
>4.8. </B
>      How do I get a GtkOptionMenu to call a function when it changes?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      <TT
CLASS="APPLICATION"
>Glade</TT
> doesn't support this at
      present, but you can set it up manually.
     </P
><P
>      When you create the window, get the option menu and connect to
      the <SPAN
CLASS="QUOTE"
>"deactivate"</SPAN
> signal emitted by its menu:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  window1 = create_window1 ();
  option_menu = lookup_widget (window1, "optionmenu1");
  gtk_signal_connect (GTK_OBJECT (GTK_OPTION_MENU (option_menu)-&#62;menu),
                      "deactivate", GTK_SIGNAL_FUNC (on_option_selected),
                      NULL);</PRE
></TD
></TR
></TABLE
>
     </P
><P
>      Then add a handler to <TT
CLASS="FILENAME"
>callbacks.c</TT
>. You can
      get the index of the selected item just like the previous answer:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>static void
on_option_selected (GtkMenuShell *menu_shell,
                    gpointer data)
{
  GtkWidget *active_item;
  gint item_index;

  active_item = gtk_menu_get_active (GTK_MENU (menu_shell));
  item_index = g_list_index (menu_shell-&#62;children, active_item);

  g_print ("In on_option_selected active: %i\n", item_index);
}</PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN349"
></A
><B
>4.9. </B
>      How do I connect to GtkAdjustment signals?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>      <TT
CLASS="APPLICATION"
>Glade</TT
> doesn't support this at
      present, but you can set it up manually, in a similar way to
      question 3.6.
     </P
><P
>      When you create the window, get a pointer to the widget
      containing the adjustment, and connect to the
      <SPAN
CLASS="QUOTE"
>"changed"</SPAN
> or <SPAN
CLASS="QUOTE"
>"value_changed"</SPAN
> signals:
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  window1 = create_window1 ();
  hscale = lookup_widget (window1, "hscale1");
  gtk_signal_connect (GTK_OBJECT (GTK_RANGE (hscale)-&#62;adjustment),
                      "changed", GTK_SIGNAL_FUNC (on_adjustment_changed),
                      NULL);</PRE
></TD
></TR
></TABLE
>

     </P
></DIV
></DIV
><DIV
CLASS="QANDAENTRY"
><DIV
CLASS="QUESTION"
><P
><A
NAME="AEN359"
></A
><B
>4.10. </B
>     How do I add rows to a GtkCList before the window is shown?
     </P
></DIV
><DIV
CLASS="ANSWER"
><P
><B
> </B
>After you create the window, using the 'create' function generated by Glade,
use <TT
CLASS="FUNCTION"
>lookup_widget</TT
>() to get a pointer to the GtkCList
widget, and add the rows as required. e.g.
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  GtkWidget *window, *clist;
  gchar *row[2];		/* Our GtkCList only has 2 columns. */

  window = create_window1 ();
  clist = lookup_widget (window, "clist1");

  row[0] = "Hello";
  row[1] = "World";
  gtk_clist_append (GTK_CLIST (clist), row);

  row[0] = "Second";
  row[1] = "Row";
  gtk_clist_append (GTK_CLIST (clist), row);

  gtk_widget_show (window1);
      </PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
></DIV
></DIV
><P
>    This FAQ  was written by Damon Chaplin
    (<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:damon@ximian.com"
>damon@ximian.com</A
>&#62;</TT
>). Please send all comments and
    suggestions regarding this manual to the author.
    For more information on <TT
CLASS="APPLICATION"
>Glade</TT
> or the
    <TT
CLASS="APPLICATION"
>Glade</TT
> mailing lists, please visit the
    <A
HREF="http://glade.pn.org"
TARGET="_top"
>Glade Home Page</A
>.
   </P
></DIV
></DIV
></BODY
></HTML
>