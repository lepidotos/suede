/* Generated by build-guile-gtk from "./gnorba.defs".  Do not edit. */

#include <libguile.h>
#include <guile-gtk.h>
#include <gnome.h>
#include <libgnorba/gnorba.h>
#include <gnorba-main.h>

typedef struct CORBA_Object_struct CORBA_Object_type;
typedef struct CORBA_ORB_type CORBA_ORB_type;
typedef struct PortableServer_POA_type PortableServer_POA_type;
typedef struct PortableServer_POAManager_type PortableServer_POAManager_type;

static sgtk_enum_literal _goad_server_type_literals[4] = {
  { SCM_UNDEFINED, "goad-server-shlib", GOAD_SERVER_SHLIB },
  { SCM_UNDEFINED, "goad-server-exe", GOAD_SERVER_EXE },
  { SCM_UNDEFINED, "goad-server-relay", GOAD_SERVER_RELAY },
  { SCM_UNDEFINED, "goad-server-factory", GOAD_SERVER_FACTORY },
};
sgtk_enum_info sgtk_goad_server_type_info = {
  { "GoadServerType", GTK_TYPE_ENUM }, 4, _goad_server_type_literals,
};

static sgtk_enum_literal _gnorba_init_flags_literals[2] = {
  { SCM_UNDEFINED, "init-server-func", GNORBA_INIT_SERVER_FUNC },
  { SCM_UNDEFINED, "disable-cookies", GNORBA_INIT_DISABLE_COOKIES },
};
sgtk_enum_info sgtk_gnorba_init_flags_info = {
  { "GnorbaInitFlags", GTK_TYPE_ENUM }, 2, _gnorba_init_flags_literals,
};

static sgtk_enum_literal _goad_activation_flags_literals[5] = {
  { SCM_UNDEFINED, "goad-activate-shlib", GOAD_ACTIVATE_SHLIB },
  { SCM_UNDEFINED, "goad-activate-remote", GOAD_ACTIVATE_REMOTE },
  { SCM_UNDEFINED, "goad-activate-existing-only", GOAD_ACTIVATE_EXISTING_ONLY },
  { SCM_UNDEFINED, "goad-activate-new-only", GOAD_ACTIVATE_NEW_ONLY },
  { SCM_UNDEFINED, "goad-activate-async", GOAD_ACTIVATE_ASYNC },
};
sgtk_enum_info sgtk_goad_activation_flags_info = {
  { "GoadActivationFlags", GTK_TYPE_ENUM }, 5, _goad_activation_flags_literals,
};

GtkTypeInfo sgtk_corba_orb_info_gtk = {
  "CORBAORB", "sizeof (CORBA_ORB)", 0,
  (GtkClassInitFunc) NULL,
  (GtkObjectInitFunc) NULL,
  (GtkArgSetFunc) NULL,
  (GtkArgGetFunc) NULL,
  (GtkClassInitFunc) NULL,
};

sgtk_boxed_info sgtk_corba_orb_info = {
  { "CORBAORB", GTK_TYPE_BOXED, NULL },
  (void *(*)(void*))gnorba_corba_orb_copy,
  (void (*)(void*))gnorba_corba_orb_free,
  0
};

GtkTypeInfo sgtk_corba_environment_info_gtk = {
  "CORBAEnvironment", "sizeof (CORBA_Environment)", 0,
  (GtkClassInitFunc) NULL,
  (GtkObjectInitFunc) NULL,
  (GtkArgSetFunc) NULL,
  (GtkArgGetFunc) NULL,
  (GtkClassInitFunc) NULL,
};

sgtk_boxed_info sgtk_corba_environment_info = {
  { "CORBAEnvironment", GTK_TYPE_BOXED, NULL },
  (void *(*)(void*))gnorba_corba_env_copy,
  (void (*)(void*))gnorba_corba_env_free,
  0
};

GtkTypeInfo sgtk_portable_server_poa_info_gtk = {
  "PortableServerPOA", "sizeof (PortableServer_POA)", 0,
  (GtkClassInitFunc) NULL,
  (GtkObjectInitFunc) NULL,
  (GtkArgSetFunc) NULL,
  (GtkArgGetFunc) NULL,
  (GtkClassInitFunc) NULL,
};

sgtk_boxed_info sgtk_portable_server_poa_info = {
  { "PortableServerPOA", GTK_TYPE_BOXED, NULL },
  (void *(*)(void*))gnorba_corba_env_copy,
  (void (*)(void*))gnorba_corba_env_free,
  0
};

GtkTypeInfo sgtk_portable_server_poamanager_info_gtk = {
  "PortableServerPOAManager", "sizeof (PortableServer_POAManager)", 0,
  (GtkClassInitFunc) NULL,
  (GtkObjectInitFunc) NULL,
  (GtkArgSetFunc) NULL,
  (GtkArgGetFunc) NULL,
  (GtkClassInitFunc) NULL,
};

sgtk_boxed_info sgtk_portable_server_poamanager_info = {
  { "PortableServerPOAManager", GTK_TYPE_BOXED, NULL },
  (void *(*)(void*))gnorba_corba_env_copy,
  (void (*)(void*))gnorba_corba_env_free,
  0
};

GtkTypeInfo sgtk_corba_object_info_gtk = {
  "CORBAObject", "sizeof (CORBA_Object)", 0,
  (GtkClassInitFunc) NULL,
  (GtkObjectInitFunc) NULL,
  (GtkArgSetFunc) NULL,
  (GtkArgGetFunc) NULL,
  (GtkClassInitFunc) NULL,
};

sgtk_boxed_info sgtk_corba_object_info = {
  { "CORBAObject", GTK_TYPE_BOXED, NULL },
  (void *(*)(void*))gnorba_corba_env_copy,
  (void (*)(void*))gnorba_corba_env_free,
  0
};

static sgtk_type_info *type_infos[] = {
  (sgtk_type_info*)&sgtk_corba_orb_info,
  (sgtk_type_info*)&sgtk_corba_environment_info,
  (sgtk_type_info*)&sgtk_portable_server_poa_info,
  (sgtk_type_info*)&sgtk_portable_server_poamanager_info,
  (sgtk_type_info*)&sgtk_corba_object_info,
  (sgtk_type_info*)&sgtk_goad_server_type_info,
  (sgtk_type_info*)&sgtk_gnorba_init_flags_info,
  (sgtk_type_info*)&sgtk_goad_activation_flags_info,
  NULL
};

static GtkTypeInfo *type_infos_gtk[] = {
  (GtkTypeInfo*)&sgtk_corba_orb_info_gtk,
  (GtkTypeInfo*)&sgtk_corba_environment_info_gtk,
  (GtkTypeInfo*)&sgtk_portable_server_poa_info_gtk,
  (GtkTypeInfo*)&sgtk_portable_server_poamanager_info_gtk,
  (GtkTypeInfo*)&sgtk_corba_object_info_gtk,
  NULL
};

/* helpers for string */

static int
_sgtk_helper_valid_string (SCM obj)
{
  return obj == SCM_BOOL_F || ((SCM_NIMP(obj) && SCM_RWSTRINGP(obj)));
}

static void
_sgtk_helper_fromscm_string (SCM obj, void *mem)
{
  *(char**)mem = ((obj) == SCM_BOOL_F? NULL : SCM_CHARS(obj));
}

static SCM
_sgtk_helper_toscm_copy_string (void *mem)
{
  return ((*(char**)mem) == NULL? SCM_BOOL_F : scm_take0str ((*(char**)mem)));
}

static SCM
_sgtk_helper_toscm_nocopy_string (void *mem)
{
  return ((*(char**)mem) == NULL? SCM_BOOL_F : scm_take0str ((*(char**)mem)));
}

static SCM
_sgtk_helper_inconversion_string (SCM obj)
{
  return sgtk_composite_inconversion (obj, sgtk_string_conversion);
}

static SCM
_sgtk_helper_outconversion_string (SCM obj)
{
  return sgtk_composite_outconversion (obj, sgtk_string_conversion);
}

static char s_gnome_corba_init[] = "gnome-corba-init";

SCM
sgtk_gnome_corba_init (SCM p_app_id, SCM p_app_version, SCM p_args, SCM p_init_flags, SCM p_ev)
{
  CORBA_ORB cr_ret;
  char* c_app_id;
  char* c_app_version;
  sgtk_cvec c_args;
  GnorbaInitFlags c_init_flags;
  CORBA_Environment* c_ev;
  p_app_id = sgtk_string_conversion (p_app_id);
  p_app_version = sgtk_string_conversion (p_app_version);
  p_args = _sgtk_helper_inconversion_string (p_args);
  SCM_ASSERT ((SCM_NIMP(p_app_id) && SCM_RWSTRINGP(p_app_id)), p_app_id, SCM_ARG1, s_gnome_corba_init);
  SCM_ASSERT ((SCM_NIMP(p_app_version) && SCM_RWSTRINGP(p_app_version)), p_app_version, SCM_ARG2, s_gnome_corba_init);
  SCM_ASSERT (sgtk_valid_composite (p_args, _sgtk_helper_valid_string), p_args, SCM_ARG3, s_gnome_corba_init);
  c_init_flags = sgtk_scm2enum (p_init_flags, &sgtk_gnorba_init_flags_info, SCM_ARG4, s_gnome_corba_init);
  if (p_ev != SCM_UNDEFINED)
    SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG5, s_gnome_corba_init);

  SCM_DEFER_INTS;
  c_app_id = ((p_app_id) == SCM_BOOL_F? NULL : SCM_CHARS(p_app_id));
  c_app_version = ((p_app_version) == SCM_BOOL_F? NULL : SCM_CHARS(p_app_version));
  c_args = sgtk_scm2cvec (p_args, _sgtk_helper_fromscm_string, sizeof (char*));
  ;
  if (p_ev == SCM_UNDEFINED)
    c_ev = gnorba_CORBA_exception_init ();
  else
    c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  cr_ret = gnome_CORBA_init (c_app_id, c_app_version, &c_args.count, (char**)c_args.vec, c_init_flags, c_ev);
  gnorba_CORBA_exception_finish (c_ev, p_ev);
  sgtk_cvec_finish (&c_args, p_args, NULL, sizeof(char*));
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_corba_orb_info, 1);
}

static char s_gnorba_corba_init[] = "gnorba-corba-init";

SCM
sgtk_gnorba_corba_init (SCM p_args, SCM p_init_flags, SCM p_ev)
{
  CORBA_ORB cr_ret;
  sgtk_cvec c_args;
  GnorbaInitFlags c_init_flags;
  CORBA_Environment* c_ev;
  p_args = _sgtk_helper_inconversion_string (p_args);
  SCM_ASSERT (sgtk_valid_composite (p_args, _sgtk_helper_valid_string), p_args, SCM_ARG1, s_gnorba_corba_init);
  c_init_flags = sgtk_scm2enum (p_init_flags, &sgtk_gnorba_init_flags_info, SCM_ARG2, s_gnorba_corba_init);
  if (p_ev != SCM_UNDEFINED)
    SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG3, s_gnorba_corba_init);

  SCM_DEFER_INTS;
  c_args = sgtk_scm2cvec (p_args, _sgtk_helper_fromscm_string, sizeof (char*));
  ;
  if (p_ev == SCM_UNDEFINED)
    c_ev = gnorba_CORBA_exception_init ();
  else
    c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  cr_ret = gnorba_CORBA_init (&c_args.count, (char**)c_args.vec, c_init_flags, c_ev);
  gnorba_CORBA_exception_finish (c_ev, p_ev);
  sgtk_cvec_finish (&c_args, p_args, NULL, sizeof(char*));
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_corba_orb_info, 1);
}

static char s_gnome_corba_orb[] = "gnome-corba-orb";

SCM
sgtk_gnome_corba_orb ()
{
  CORBA_ORB cr_ret;

  SCM_DEFER_INTS;
  cr_ret = gnome_CORBA_ORB ();
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_corba_orb_info, 1);
}

static char s_gnorba_corba_exception_init[] = "gnorba-corba-exception-init";

SCM
sgtk_gnorba_corba_exception_init ()
{
  CORBA_Environment* cr_ret;

  SCM_DEFER_INTS;
  cr_ret = gnorba_CORBA_exception_init ();
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_corba_environment_info, 1);
}

static char s_gnorba_corba_exception_throw[] = "gnorba-corba-exception-throw";

SCM
sgtk_gnorba_corba_exception_throw (SCM p_ev, SCM p_ev_as_scm)
{
  CORBA_Environment* c_ev;
  SCM c_ev_as_scm;
  SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG1, s_gnorba_corba_exception_throw);
  if (p_ev_as_scm != SCM_UNDEFINED)
    SCM_ASSERT (TRUE, p_ev_as_scm, SCM_ARG2, s_gnorba_corba_exception_throw);

  SCM_DEFER_INTS;
  c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  if (p_ev_as_scm == SCM_UNDEFINED)
    c_ev_as_scm = p_ev;
  else
    c_ev_as_scm = p_ev_as_scm;
  gnorba_CORBA_exception_throw (c_ev, c_ev_as_scm);
  SCM_ALLOW_INTS;

  return SCM_UNSPECIFIED;
}

static char s_corba_orb_resolve_initial_references[] = "corba-orb-resolve-initial-references";

SCM
sgtk_corba_orb_resolve_initial_references (SCM p_orb, SCM p_object_id, SCM p_ev)
{
  PortableServer_POA cr_ret;
  CORBA_ORB c_orb;
  char* c_object_id;
  CORBA_Environment* c_ev;
  p_object_id = sgtk_string_conversion (p_object_id);
  SCM_ASSERT (sgtk_valid_boxed (p_orb, &sgtk_corba_orb_info), p_orb, SCM_ARG1, s_corba_orb_resolve_initial_references);
  SCM_ASSERT ((SCM_NIMP(p_object_id) && SCM_RWSTRINGP(p_object_id)), p_object_id, SCM_ARG2, s_corba_orb_resolve_initial_references);
  if (p_ev != SCM_UNDEFINED)
    SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG3, s_corba_orb_resolve_initial_references);

  SCM_DEFER_INTS;
  c_orb = (CORBA_ORB)sgtk_scm2boxed (p_orb);
  c_object_id = ((p_object_id) == SCM_BOOL_F? NULL : SCM_CHARS(p_object_id));
  if (p_ev == SCM_UNDEFINED)
    c_ev = gnorba_CORBA_exception_init ();
  else
    c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  cr_ret = CORBA_ORB_resolve_initial_references (c_orb, c_object_id, c_ev);
  gnorba_CORBA_exception_finish (c_ev, p_ev);
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_portable_server_poa_info, 1);
}

static char s_portable_server_poa__get_the_poamanager[] = "portable-server-poa--get-the-poamanager";

SCM
sgtk_portable_server_poa__get_the_poamanager (SCM p_poa, SCM p_ev)
{
  PortableServer_POAManager cr_ret;
  PortableServer_POA c_poa;
  CORBA_Environment* c_ev;
  SCM_ASSERT (sgtk_valid_boxed (p_poa, &sgtk_portable_server_poa_info), p_poa, SCM_ARG1, s_portable_server_poa__get_the_poamanager);
  if (p_ev != SCM_UNDEFINED)
    SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG2, s_portable_server_poa__get_the_poamanager);

  SCM_DEFER_INTS;
  c_poa = (PortableServer_POA)sgtk_scm2boxed (p_poa);
  if (p_ev == SCM_UNDEFINED)
    c_ev = gnorba_CORBA_exception_init ();
  else
    c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  cr_ret = PortableServer_POA__get_the_POAManager (c_poa, c_ev);
  gnorba_CORBA_exception_finish (c_ev, p_ev);
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_portable_server_poamanager_info, 1);
}

static char s_portable_server_poamanager_activate[] = "portable-server-poamanager-activate";

SCM
sgtk_portable_server_poamanager_activate (SCM p_pm, SCM p_ev)
{
  PortableServer_POAManager c_pm;
  CORBA_Environment* c_ev;
  SCM_ASSERT (sgtk_valid_boxed (p_pm, &sgtk_portable_server_poamanager_info), p_pm, SCM_ARG1, s_portable_server_poamanager_activate);
  if (p_ev != SCM_UNDEFINED)
    SCM_ASSERT (sgtk_valid_boxed (p_ev, &sgtk_corba_environment_info), p_ev, SCM_ARG2, s_portable_server_poamanager_activate);

  SCM_DEFER_INTS;
  c_pm = (PortableServer_POAManager)sgtk_scm2boxed (p_pm);
  if (p_ev == SCM_UNDEFINED)
    c_ev = gnorba_CORBA_exception_init ();
  else
    c_ev = (CORBA_Environment*)sgtk_scm2boxed (p_ev);
  PortableServer_POAManager_activate (c_pm, c_ev);
  gnorba_CORBA_exception_finish (c_ev, p_ev);
  SCM_ALLOW_INTS;

  return SCM_UNSPECIFIED;
}

static char s_gnome_name_service_get[] = "gnome-name-service-get";

SCM
sgtk_gnome_name_service_get ()
{
  CORBA_Object cr_ret;

  SCM_DEFER_INTS;
  cr_ret = gnome_name_service_get ();
  SCM_ALLOW_INTS;

  return sgtk_boxed2scm (cr_ret, &sgtk_corba_object_info, 1);
}

void
gnome_gnorba_init_guile_glue_types ()
{
  static int done = 0;
  if (!done)
    {
      done = 1;
      sgtk_register_type_infos (type_infos);
      sgtk_register_type_infos_gtk (type_infos_gtk);

      sgtk_enum_flags_init (&sgtk_goad_activation_flags_info);
      sgtk_enum_flags_init (&sgtk_gnorba_init_flags_info);
      sgtk_enum_flags_init (&sgtk_goad_server_type_info);
    }
}


void
gnome_gnorba_init_guile_glue ()
{
  gnome_gnorba_init_guile_glue_types ();
  gnome_gnorba_init_guile_support ();
  scm_make_gsubr (s_gnome_name_service_get, 0, 0, 0, sgtk_gnome_name_service_get);
  scm_make_gsubr (s_portable_server_poamanager_activate, 1, 1, 0, sgtk_portable_server_poamanager_activate);
  scm_make_gsubr (s_portable_server_poa__get_the_poamanager, 1, 1, 0, sgtk_portable_server_poa__get_the_poamanager);
  scm_make_gsubr (s_corba_orb_resolve_initial_references, 2, 1, 0, sgtk_corba_orb_resolve_initial_references);
  scm_make_gsubr (s_gnorba_corba_exception_throw, 1, 1, 0, sgtk_gnorba_corba_exception_throw);
  scm_make_gsubr (s_gnorba_corba_exception_init, 0, 0, 0, sgtk_gnorba_corba_exception_init);
  scm_make_gsubr (s_gnome_corba_orb, 0, 0, 0, sgtk_gnome_corba_orb);
  scm_make_gsubr (s_gnorba_corba_init, 2, 1, 0, sgtk_gnorba_corba_init);
  scm_make_gsubr (s_gnome_corba_init, 4, 1, 0, sgtk_gnome_corba_init);
}
