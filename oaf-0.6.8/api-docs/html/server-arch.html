<HTML
><HEAD
><TITLE
>Server architecture</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="The liboaf Library"
HREF="book1.html"><LINK
REL="UP"
TITLE="OAF Architecture"
HREF="architecture.html"><LINK
REL="PREVIOUS"
TITLE="OAF Architecture"
HREF="architecture.html"><LINK
REL="NEXT"
TITLE="Async Activation"
HREF="async-activation.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
BGCOLOR="#000000"
CELLPADDING="1"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="5"
>The liboaf Library</FONT
></TH
></TR
><TR
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="left"
><A
HREF="architecture.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>&#60;&#60;&#60; Previous Page</B
></FONT
></A
></TD
><TD
WIDTH="25%"
BGCOLOR="#0000C0"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="book1.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Home</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#00C000"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="architecture.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Up</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="right"
><A
HREF="async-activation.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Next Page &#62;&#62;&#62;</B
></FONT
></A
></TD
></TR
></TABLE
></DIV
><BR
CLEAR="all"><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="SERVER-ARCH"
>Server architecture</A
></H1
><P
>The OAF server is split in 2 parts: the <TT
CLASS="CLASSNAME"
>ObjectDirectory</TT
> which contains the list
of all servers on a given machine, and the <TT
CLASS="CLASSNAME"
>ActivationContext</TT
> which contains the
list of all ObjectDirectories. It contains by default the local ObjectDirectory
and you can add inside other distant ObjectDirectories.</P
><P
>Each server is described by its .oafinfo file which contains among others
the IDL interfaces this server implements, some specific properties and 
an <I
CLASS="EMPHASIS"
>IID</I
> (Implementation ID). Each IID has to be unique.
Its format is pretty simple:
<TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>OAFIID:program_name:UUID</PRE
></TD
></TR
></TABLE
>
The UUID is supposed to be generated by the <I
CLASS="EMPHASIS"
>uuidgen</I
> 
program. <I
CLASS="EMPHASIS"
>program_name</I
> has to be an ASCII string without
comma (','), square bracket ('[]'), or forward slash ('/') characters.</P
><P
>Each CORBA server on a given machine is thus identified in a unique way.
CORBA servers on different machines are uniquely identified through the 
<I
CLASS="EMPHASIS"
>AID</I
> (Activation ID). The AID format is also pretty
simple:
<TABLE
BORDER="0"
BGCOLOR="#D6E8FF"
WIDTH="100%"
CELLPADDING="6"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>OAFAID:[IID,user,host,domain]</PRE
></TD
></TR
></TABLE
>
<I
CLASS="EMPHASIS"
>user</I
> is the user unix login.
<I
CLASS="EMPHASIS"
>host</I
> is a DNS domain name or stringified IP
address.
<I
CLASS="EMPHASIS"
>domain</I
> is is a string describing what use 
area the object has.</P
><P
>One important thing to understand about these AID and IID is that the 
<TT
CLASS="CLASSNAME"
>ObjectDirectory</TT
> deals exclusively with IIDs (it is stritcly local) and
the <TT
CLASS="CLASSNAME"
>ActivationContext</TT
> deals with AIDs since it can associate a set of
<I
CLASS="EMPHASIS"
>user</I
>, <I
CLASS="EMPHASIS"
>host</I
> and 
<I
CLASS="EMPHASIS"
>domain</I
> to each IID it gets from one of its 
<TT
CLASS="CLASSNAME"
>ObjectDirectory</TT
>.</P
><P
>As a result of this architecture, activation requests should go to the 
<TT
CLASS="CLASSNAME"
>ActivationContext</TT
> and
registrations to the <TT
CLASS="CLASSNAME"
>ObjectDirectory</TT
>.
	<DIV
CLASS="FIGURE"
><A
NAME="AEN117"
></A
><P
><B
>Figure 1. OAF architecture</B
></P
><P
><IMG
SRC="oaf.png"></P
></DIV
>
The idea behind this is that when you make a request on the ActivationContext (like query),
it will:
<P
></P
><UL
><LI
><P
>make sure it has an up-to-date list of all the Servers with a call to 
<TT
CLASS="FUNCTION"
>ObjectDirectory::get_servers</TT
> for each of its ObjectDirectory.</P
></LI
><LI
><P
>loop through this list to try to satisfy the query with the
given requirements and sort-order.</P
></LI
><LI
><P
>activate the corresponding object with 
<TT
CLASS="FUNCTION"
>ObjectDirectory::activate</TT
> (this is not exactly what happens 
since there are optimizations to save this call but the general idea is right).</P
></LI
></UL
></P
></DIV
><DIV
CLASS="NAVFOOTER"
><BR
CLEAR="all"><BR><TABLE
WIDTH="100%"
BORDER="0"
BGCOLOR="#000000"
CELLPADDING="1"
CELLSPACING="0"
><TR
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="left"
><A
HREF="architecture.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>&#60;&#60;&#60; Previous Page</B
></FONT
></A
></TD
><TD
WIDTH="25%"
BGCOLOR="#0000C0"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="book1.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Home</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#00C000"
ALIGN="center"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
><A
HREF="architecture.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Up</B
></FONT
></A
></B
></FONT
></TD
><TD
WIDTH="25%"
BGCOLOR="#C00000"
ALIGN="right"
><A
HREF="async-activation.html"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Next Page &#62;&#62;&#62;</B
></FONT
></A
></TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="left"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>OAF Architecture</B
></FONT
></TD
><TD
COLSPAN="2"
ALIGN="right"
><FONT
COLOR="#FFFFFF"
SIZE="3"
><B
>Async Activation</B
></FONT
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>